--- src/libopts/autoopts.h
+++ src/libopts/autoopts.h
@@ -43,9 +43,11 @@
 #    define AG_PATH_MAX         ((size_t)4096)
 #  endif
 #else
-#  if defined(PATH_MAX) && (PATH_MAX > MAXPATHLEN)
+#  ifdef PATH_MAX
+#    if PATH_MAX > MAXPATHLEN
 #     undef  AG_PATH_MAX
 #     define AG_PATH_MAX        ((size_t)PATH_MAX)
+#    endif
 #  endif
 #endif
 
